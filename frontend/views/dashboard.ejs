<%- include('partials/header') %>

  <!-- Vercel Revert Sync: OK -->
  <% function getStatusBadgeClass(status) { if (!status) return 'badge-secondary' ; switch (status.toLowerCase()) {
    case 'success' : return 'badge-success' ; case 'pending' : return 'badge-warning' ; case 'cancelled' :
    return 'badge-danger' ; case 'processing' : return 'badge-info' ; case 'accepted' : return 'badge-success' ;
    case 'rejected' : return 'badge-danger' ; default: return 'badge-secondary' ; } } // Default arrays if undefined var
    localExpiryMedicines=(typeof expiryMedicines !=='undefined' ? expiryMedicines : []); var
    localLowStockMedicines=(typeof lowStockMedicines !=='undefined' ? lowStockMedicines : []); var
    totalAlerts=localExpiryMedicines.length + localLowStockMedicines.length; var localOnlineOrders=(typeof onlineOrders
    !=='undefined' ? onlineOrders : []); var localInPersonSales=(typeof inPersonSales !=='undefined' ? inPersonSales :
    []); %>

    <!-- Main Dashboard Container -->
    <div class="container-fluid mt-4 p-0">
      <!-- Header Section -->
      <section class="content-header mb-4">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1 class="text-dark font-weight-bold">
                <i class="fas fa-tachometer-alt mr-2"></i> Insights Dashboard
              </h1>
            </div>
          </div>
        </div>
      </section>

      <!-- Key Metrics Row -->
      <div class="row mb-5">
        <div class="col-md-6 col-lg-3 mb-4">
          <div class="card shadow-md hover-card bg-primary rounded-lg border-none text-white">
            <div class="card-body d-flex flex-column align-items-center text-center p-4">
              <div class="metric-icon mb-3 bg-white-opacity">
                <i class="fas fa-prescription-bottle fa-3x text-white"></i>
              </div>
              <h5 class="card-title mb-1">Total Medicines</h5>
              <h3 class="card-text font-weight-bold mb-2">
                <%= medicineCount %>
              </h3>
              <a href="/admin/medicines?token=<%= token %>" class="btn btn-link text-white p-0 mt-auto">View <i
                  class="fas fa-arrow-right"></i></a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 mb-4">
          <div class="card shadow-md hover-card bg-success rounded-lg border-none text-white">
            <div class="card-body d-flex flex-column align-items-center text-center p-4">
              <div class="metric-icon mb-3 bg-white-opacity">
                <i class="fas fa-users fa-3x text-white"></i>
              </div>
              <h5 class="card-title mb-1">Total Users</h5>
              <h3 class="card-text font-weight-bold mb-2">
                <%= userCount %>
              </h3>
              <a href="/admin/users?token=<%= token %>" class="btn btn-link text-white p-0 mt-auto">View <i
                  class="fas fa-arrow-right"></i></a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 mb-4">
          <div class="card shadow-md hover-card bg-danger rounded-lg border-none text-white">
            <div class="card-body d-flex flex-column align-items-center text-center p-4">
              <div class="metric-icon mb-3 bg-white-opacity">
                <i class="fas fa-exclamation-triangle fa-3x text-white"></i>
              </div>
              <h5 class="card-title mb-1">Medicine Alerts</h5>
              <h3 class="card-text font-weight-bold mb-2">
                <%= totalAlerts %>
              </h3>
              <a href="/admin/medicine-alerts?token=<%= token %>" class="btn btn-link text-white p-0 mt-auto">View <i
                  class="fas fa-arrow-right"></i></a>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-3 mb-4">
          <div class="card shadow-md hover-card bg-warning rounded-lg border-none text-white">
            <div class="card-body d-flex flex-column align-items-center text-center p-4">
              <div class="metric-icon mb-3 bg-white-opacity">
                <i class="fas fa-dollar-sign fa-3x text-white"></i>
              </div>
              <h5 class="card-title mb-1">Total Sales</h5>
              <h3 class="card-text font-weight-bold mb-2">Rs <%= totalSales %>
              </h3>
            </div>
          </div>
        </div>
      </div>

    </div>


    <!-- Custom Scripts and Styles -->
    <script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

    <style>
      .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        transition: 0.3s;
      }

      .bg-white-opacity {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        padding: 15px;
      }
    </style>

    <%- include('partials/footer') %>