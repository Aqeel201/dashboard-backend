<%- include('partials/header') %>

<!-- Content Header -->
<section class="content-header">
  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-sm-6">
        <h1>Change Password for <%= userToChange.firstName %> <%= userToChange.lastName %></h1>
      </div>
      <div class="col-sm-6 text-right">
        <a href="/admin/users?token=<%= token %>" class="btn btn-primary">
          <i class="fas fa-arrow-left"></i> Back to Users
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Main Content -->
<section class="content">
  <div class="container-fluid">
    <% if (message) { %>
      <div class="alert alert-success alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <%= message %>
      </div>
    <% } %>
    <% if (error) { %>
      <div class="alert alert-danger alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <%= error %>
      </div>
    <% } %>
    
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Change Password</h3>
      </div>
      <div class="card-body">
        <form action="/admin/users/<%= userToChange.id %>/change-password?token=<%= token %>" method="POST">
          <div class="form-group">
            <label for="newPassword">New Password:</label>
            <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="Enter new password" required>
          </div>
          <div class="form-group">
            <label for="adminPassword">Your Admin Password:</label>
            <input type="password" class="form-control" id="adminPassword" name="adminPassword" placeholder="Enter your admin password for confirmation" required>
          </div>
          <button type="submit" class="btn btn-warning">
            <i class="fas fa-key"></i> Update Password
          </button>
        </form>
      </div>
    </div>
  </div>
</section>

<%- include('partials/footer') %>
